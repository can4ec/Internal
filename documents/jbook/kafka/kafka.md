## Настройки хранения сегментов

```properties
log.retention.hours=336
log.segment.bytes.bytes=1073741824
log.roll.hours=168
```

Описание

* Сегменты пересоздаются каждые 7 дней (`log.roll.hours`)
* Либо по достжении ими размера ~1 ГБ (`log.segment.bytes.bytes`)
* Сегмент будет удален, когда все сообщения в сегменте будут старше 336 (`log.retention.hours`)

При изменении вжно помнить про memory Map!!!

Kafka хранит сообщения в файлах сегментов журнала (log segment files). Эти файлы делятся на части фиксированного
размера (обычно около гигабайт). Каждый сегмент имеет два основных компонента:

Index File: Индексный файл содержит позиции записей внутри сегмента, облегчая быстрый доступ к данным.
Data File: Файл данных, содержащий сами записи сообщений.
Когда брокеры Kafka читают данные из файлов журналов, они используют memory-mapped I/O для оптимизации
производительности следующим образом:

Вместо традиционного чтения файлов блоками через стандартные API-функции read/write, Kafka отображает журнал (или
отдельные его фрагменты) непосредственно в память процессора.
Когда клиент запрашивает сообщение, Kafka обращается к нужному сегменту и индексирует позицию нужной записи в файле
данных, используя индексы. Затем процессор извлекает данные прямо из соответствующего участка виртуальной памяти.

Проверям разрешенной колво mmap в linux

```shell
sysctl vm.max_map_cout
```

Формула чтобы расчитать сколь нужно Kafka

Кол-во топиков * кол-во партицый * кол-во сегментов * 2 (index и datafile)
